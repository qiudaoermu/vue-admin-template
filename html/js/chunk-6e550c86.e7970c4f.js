(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e550c86"],{"1fe8":function(t,e,s){t.exports=s.p+"img/error.a3f81bd5.png"},"50d6":function(t,e,s){"use strict";s("70fa")},5712:function(t,e,s){t.exports=s.p+"img/right.ee9223ee.png"},"70fa":function(t,e,s){},c3b4:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAABBZJREFUWEfNmNtv1EUUxz9nWmBj21SRdLfbijahWCUFUjTipQpqDQFJTDAYjfTBZ3zwxT/CFx7ouwl9MFHrg9oEAlJssS3eQqKxUi5SC0u3gdpSGgpt55jdXy/b7m9/N0iz8/RLft8585kzZ86cGaHImxQ5H5EBdWJiPdNT+4AWlCcQTYIknQlrCpUUwjBwklhZp1RWjkVxRmhATacOoBxGaEa1JNCgInMoPQhtEk92BOozLwoMqKOpDNBnKDvDDJCnFfoR+VSqkj1B7PgCqmop6ZEjYA8HMRhcY9qIJz4RkVmvPp6ATpzd+RLljeADh1AKPxArP+gVnwUB5+F6UZ4OMWR4qXCBWPlLhSBdAbPLOpo6HtZztvMbmBjHfPBRONCMJ6uSe9yW2x1w5MbRKDEXGTA7HdMmieqPV84sDzC7W612h3OBo34wwAyjvLpyd+cDpq/3uaaS1DB24E/MrhYoKXXnT9+A2Rmo2VhwfvpLH1LfAI8+lq8R+iVe82Luj2WAThLWr92s264T6LUhpPZJB1LMkszOwdhNdGoKEYGycli/ATLfOU3PncUO/oUkkpiWt90nIfJubjJfDjiS6gLd5dpzZhZ7qhO9mcY0v448tQnuTqHnf0OHrqAz95d1k1gMqduMNG6HdTH04gC2vwepqMTs2Q+xRwp4Wc5IIrl74eci4PzZOup5fN2/h165hDRsgeGr2J9OozOeeZYMqHntLXh8A/pzL7K1yfFwoZY5FmNlVQtpZwkwnTqE6rEgm0OvXkZ7TqNoEDliSjBv7oV4dSA9Iq0ST7ZnxLmAx1A95GthcgL7fQc6u+Q5U1ePNDyLjt3CnjvraiLryf0HIRbzHQKRdoknW5cDesVfjknbfSobc05nQV7ZjdRtchTXhpjrOlEQwDQ0Is8v26S+cZjjwesXUDZ7Tm/6Lvar9sWFNVu2IU0vwOQktrcLHR3x7C6lazDvtYLxqdKEQYnXZI/Y3CWeRNUjekEvD2J7zzjeMwZz4ENYuwb7XQd6e9x/6YCSln2QqPHWityReLIiPOD5X7F//O4AVlRg3nkf/v2HuR9PBoLLiMzOZqT+mSiA/kus/T3YiwOLxqW6Bv67hU5PBwfc/hzS2OQD6LbEATaJ9nVjL/0dGMZNaLbtQLbu8LGxlKxDpZlVA3RNMwES9SoCuiRq5xrpedStCmChoy4TFOoTh6sCSIFiIQvoUW5l/6/GJvEqtxxI94LVHv8Wbo+j94KnFLetKmvXIbUbkZcXK6olmV/BmgUsUPLbLz5HM9XyQ2iSqMW07M23FKTkd2Ix2qXpwdgDXpqygBGvnZEBw147s5DOq0JxXtwXPFHUTx+LkMX8eJQbU0X7/LYy8Iv2ATMPtFifgCOnkogdfV9YI9p9aN3+By9W/ji+isiCAAAAAElFTkSuQmCC"},e154:function(t,e,s){},ed8e:function(t,e,s){"use strict";s("e154")},ee78:function(t,e,s){t.exports=s.p+"img/display.6133da89.png"},f26e:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main"},[s("test-result-first")],1)},o=[],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section-container"},[s("h1",{staticClass:"title"},[t._v("洗衣机下线外观缺陷检测")]),s("section",{staticClass:"data-show"},[s("div",{staticClass:"data-show-left"},[s("div",{staticClass:"data-show-left-top"},[s("div",{staticClass:"data-show-left-top-left"},[s("header-title",{staticClass:"title1",attrs:{title:"数据分析"}}),s("header-title",{attrs:{title:"产品合格率分析"}}),s("v-chart",{staticClass:"chart-top chart",attrs:{option:t.optionCheck}}),s("header-title",{attrs:{title:"错误位置统计"}}),s("v-chart",{staticClass:"chart-bottom chart",attrs:{option:t.optionError}})],1),s("div",{staticClass:"data-show-left-top-middle"},[s("div",{staticClass:"data-show-left-top-middle-summary"},t._l(t.summaryList,(function(e,a){return s("li",{key:a},[s("h4",[t._v(t._s(e.num))]),s("p",[t._v(t._s(e.title))])])})),0),s("div",{staticClass:"data-show-left-top-image"},[s("header-title",{attrs:{title:"当前检测位置"}}),s("img",{attrs:{src:t.display}})],1)]),s("div",{staticClass:"data-show-left-top-right"},[s("div",{staticClass:"data-show-left-top-right-top"},[s("div",{staticClass:"data-show-right-top-action"},[s("el-form",{ref:"numberValidateForm",staticClass:"demo-ruleForm",attrs:{inline:!0,model:t.numberValidateForm}},[s("el-form-item",[t.ws?s("el-button",{attrs:{icon:"el-icon-switch-button",type:"danger"},on:{click:function(e){return t.stopHandle()}}},[t._v(" 停止 ")]):s("el-button",{attrs:{type:"primary",icon:"el-icon-caret-right"},on:{click:function(e){return t.startHandle()}}},[t._v(" 开始 ")])],1),s("el-form-item",{attrs:{label:"产品编号:"}},[s("h2",{staticStyle:{color:"green"}},[t._v(" "+t._s(t.sn))])])],1),s("div",{staticClass:"data-show-right-top-result"},[s("p",[t._v("检测结果：")]),5===t.pos?s("div",[t.result?s("h3",[t._v("合格")]):s("h3",{staticStyle:{color:"red"}},[t._v("NG")])]):t._e()])],1),s("div",{staticClass:"data-show-right-top-list"},[s("header-title",{attrs:{title:"检测项"}}),s("el-table",{attrs:{size:"mini",data:t.tableData,"row-class-name":t.tableRowClassName}},[s("el-table-column",{attrs:{prop:"name",label:"检测项",width:"80"}}),s("el-table-column",{attrs:{prop:"detectInfo",label:"检测标准",width:"80"}}),s("el-table-column",{attrs:{prop:"result",label:"检测结果",width:"120"}}),s("el-table-column",{attrs:{prop:"detectInfo",label:"结果"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.detectStatus?s("img",{attrs:{src:t.right}}):e.row.detectStatus?t._e():s("img",{attrs:{src:t.error}})]}}])})],1)],1)])])]),s("div",{staticClass:"data-show-left-bottom"},[s("div",{staticClass:"data-show-left-bottom-left"},[s("header-title",{attrs:{title:"报警信息"}}),s("ul",{staticClass:"data-show-left-bottom-left-blog"},t._l(t.logs,(function(e){return s("li",[s("img",{attrs:{src:t.admin}}),s("p",[t._v(" "+t._s(e.log)+" ")])])})),0)],1),s("div",{staticClass:"data-show-left-bottom-right"},[s("header-title",{attrs:{title:"设备状态("+t.connectionStatesText+")"}}),t._m(0)],1)])])]),s("section",{staticClass:"data-scroll"})])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"receiver-user"},[s("div",{staticClass:"content-wrapper"},[s("ul",{staticClass:"list"},[s("li",[s("span",{staticClass:"key"},[t._v("机械臂:")]),s("span",{staticClass:"value bold-size"},[t._v("127.0.0.1:57156")])]),s("li",[s("span",{staticClass:"key"},[t._v("PLC:")]),s("span",{staticClass:"value bold-size"},[t._v("127.0.0.1:502")])]),s("li",[s("span",{staticClass:"key"},[t._v("TCP扫码枪：")]),s("span",{staticClass:"value bold-size"})]),s("li",[s("span",{staticClass:"key"},[t._v("A面相机：")]),s("span",{staticClass:"value bold-size"})])]),s("ul",{staticClass:"list"},[s("li",[s("span",{staticClass:"key"},[t._v("RFID扫码枪：")]),s("span",{staticClass:"value bold-size"},[t._v("127.0.0.1:57156")])]),s("li",[s("span",{staticClass:"key"},[t._v("B面相机：")]),s("span",{staticClass:"value bold-size"},[t._v("127.0.0.1:502")])])])])])}],r=s("3835"),c=(s("4160"),s("d3b7"),s("159b"),s("d81d"),s("e9c4"),s("b0c0"),s("ac1f"),s("5319"),s("a623"),s("22b4")),l=s("f95e"),d=s("49bb"),u=s("4cb5"),h=s("c3b4"),p=s.n(h),f=s("5712"),m=s.n(f),v=s("1fe8"),w=s.n(v),C=s("ee78"),b=s.n(C),g=s("9394"),y=s("2da7"),k=s("ff32"),S=s("4b2a"),A=s("5c7f"),L=s("d4ec"),E=s("bee2"),_=(s("99af"),function(){function t(e){Object(L["a"])(this,t),this.ws=new WebSocket("ws://".concat("192.168.1.100:9191","/").concat(e)),this._onCatchErr(),this._onClose()}return Object(E["a"])(t,[{key:"onSendMessage",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";1===this.ws.readyState?this.ws.send(e):this.ws.addEventListener("open",(function(s){console.log(t.ws.readyState),t.ws.send(e)}))}},{key:"_onCatchErr",value:function(){this.ws.addEventListener("error",(function(t){console.error("Error from server ",t.data)}))}},{key:"_onClose",value:function(){this.ws.addEventListener("close",(function(t){console.log("websocket 断开: "+t.code+" "+t.reason+" "+t.wasClean),console.log("Ws has closed")}))}}]),t}()),x=_,I=s("2ed5"),O=s("ba84");Object(c["a"])([l["a"],d["a"],u["a"],g["a"],y["a"],k["a"],S["a"]]);var T={name:"TestResultFirst",components:{VChart:A["a"]},watch:{connectionStates:function(t){this.connectionStatesText=!0===t?"已连接":"未连接"}},filters:{filiterResult:function(t){return 1===t?"合格":"NG"}},data:function(){return{connectionStatesText:"未连接",connectionStates:!0,admin:p.a,right:m.a,error:w.a,display:b.a,detects:{1:"二维码",2:"缝隙",3:"划伤划痕",4:"模版匹配",5:"螺丝检测"},tableData:[{name:"二维码",result:"",key:1,detectInfo:"",detectStatus:2},{name:"缝隙",result:"",key:2,detectInfo:"",detectStatus:2},{name:"划伤划痕",result:"",key:3,detectInfo:"",detectStatus:2},{name:"模版匹配",result:"",key:4,detectInfo:"",detectStatus:2},{name:"螺丝检测",result:"",key:5,detectInfo:"",detectStatus:2}],logs:[{log:"2022-06-13  15:30:30.537: CPU使用率达到87%！"},{log:"2022-06-13  18:30:10.537: CPU使用率达到70%！"},{log:"2022-06-13  19:30:42.537: CPU使用率达到90%！"}],numberValidateForm:{time:0},summaryList:[{title:"总数",num:0,key:"total"},{title:"合格",num:0,key:"eligibleNum"},{title:"不合格",num:0,key:"uneligibleNum"},{title:"合格率",num:0,key:"eligibleRate"}],optionCheck:{xAxis:{type:"category",data:["合格","不合格"]},yAxis:{type:"value"},grid:{left:"15%",top:"5%",right:"5%",bottom:"20%"},series:[{data:[0,{value:0,itemStyle:{color:"#a90000"}}],type:"bar"}]},optionError:{xAxis:{type:"category",data:["合格","不合格"]},yAxis:{type:"value"},grid:{left:"15%",top:"5%",right:"5%",bottom:"20%"},series:[{data:[],type:"bar"}]},ws:"",result:"",sn:"",pos:""}},created:function(){var t=window.localStorage.getItem("sockect-connet");t&&this.initSocket()},mounted:function(){},methods:{productStatisticsApi:function(t){this.summaryList.forEach((function(e){e.num=t[e.key]})),this.optionCheck.series[0].data[0]=this.summaryList[1].num,this.optionCheck.series[0].data[1].value=this.summaryList[2].num},errorPosStatisApi:function(t){var e=this;t.forEach((function(t){t.key=e.detects[t.pos]})),this.optionError.xAxis.data=t.map((function(t){return t.key})),this.optionError.series[0].data=t.map((function(t){return t.num}))},tableRowClassName:function(t){t.row;var e=t.rowIndex;return e%2===0?"table-row-default":"success-row"},startHandle:function(){window.localStorage.setItem("sockect-connet",!0),this.initSocket()},initSocket:function(){var t=this;this.ws=new x("socket/pushMessage/1");var e=JSON.stringify({sceneInfoId:this.$route.query.sceneInfoId});this.ws.onSendMessage(e),this.ws.ws.addEventListener("message",(function(e){if("连接成功"!==e.data){var s=e.data&&JSON.parse(e.data);if("close"===s.cs&&(t.connectionStates=!1),"connect"===s.cs&&(t.connectionStates=!0),t.connectionStatesText=!0===t.connectionStates?"已连接":"未连接",s.result){s.result.forEach((function(e){e.name=t.detects[e.pos]}));var a=Object(r["a"])(s.result,1),o=a[0];t.display="http://192.168.1.100"+o.imgUrl.replace("/home",""),t.result=s.result.every((function(t){return 1===t.detectStatus})),t.tableData=s.result,t.sn=o.sn,t.productStatisticsApi(s.product),t.errorPosStatisApi(s.error),t.pos=s.pos,I["a"].prettyWarn("---Time---:",Object(O["b"])()),I["a"].prettyPrimary("--Websocket Receive Message: ",s),I["a"].prettyPrimary("Current display Image: ",t.display)}}}))},stopHandle:function(){window.localStorage.removeItem("sockect-connet"),window.location.reload()}}},R=T,j=(s("50d6"),s("2877")),M=Object(j["a"])(R,n,i,!1,null,"67d6e93e",null),N=M.exports,U={name:"Index",components:{testResultFirst:N},data:function(){return{activeName:"first"}},created:function(){},mounted:function(){},methods:{handleClick:function(){},websocket:function(t,e){this.ws=new WebSocket("ws://".concat("192.168.1.100:9191","/socket/pushMessage/1")),this._onSendMessage(),this._onGetMessage(),this._onCatchErr(),this._onClose()},_onSendMessage:function(){var t=this;this.ws.sendMessage=function(e){1===t.ws.readyState?t.ws.send(e):t.ws.addEventListener("open",(function(s){console.log(t.ws.readyState),t.ws.send(e)}))}},_onCatchErr:function(){this.ws.addEventListener("error",(function(t){console.log("Error from server ",t.data)}))},_onClose:function(){this.ws.addEventListener("close",(function(t){console.log("websocket 断开: "+t.code+" "+t.reason+" "+t.wasClean),console.log("Ws has closed")}))},_onGetMessage:function(){this.ws.addEventListener("message",(function(t){t.data&&JSON.parse(t.data)}))}}},q=U,z=(s("ed8e"),Object(j["a"])(q,a,o,!1,null,"7a2a47b6",null));e["default"]=z.exports}}]);