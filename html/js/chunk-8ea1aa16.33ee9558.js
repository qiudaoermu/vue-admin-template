(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8ea1aa16"],{"06c3":function(e,t,a){},"13d1":function(e,t,a){"use strict";a.r(t);var o={};a.r(o),a.d(o,"registerStart",(function(){return k})),a.d(o,"registerUser",(function(){return N})),a.d(o,"registerEnd",(function(){return $})),a.d(o,"registerPush",(function(){return P})),a.d(o,"registerdevice",(function(){return I})),a.d(o,"registeralgorithm",(function(){return w})),a.d(o,"registerScene",(function(){return D})),a.d(o,"registerPolyline",(function(){return T})),a.d(o,"registerTask",(function(){return E})),a.d(o,"registerConnect",(function(){return B}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.initPanConfFlag?a("LF",{attrs:{panelConfig:e.panelConfig,record:e.record},on:{emitTransfromRecord:e.emitTransfromRecord}}):e._e()],1)},i=[],r=a("c7eb"),s=a("1da1"),c=a("15fd"),l=a("5530"),d=(a("b0c0"),a("d81d"),a("4de4"),a("d3b7"),a("07ac"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"logic-flow-view"},[e.lf?a("Control",{staticClass:"demo-control",attrs:{lf:e.lf,catTurboData:!0},on:{catTurboData:e.$_catTurboData,catSaveData:e.$_catSaveData,catData:e.$_catData,renderImportView:e.$_renderImportView}}):e._e(),e.lf?a("NodePanel",{attrs:{lf:e.lf,nodeList:e.panelConfig}}):e._e(),a("div",{ref:"container",attrs:{id:"LF-view"}}),e.showAddPanel?a("AddPanel",{staticClass:"add-panel",style:e.addPanelStyle,attrs:{lf:e.lf,nodeData:e.addClickNode},on:{addNodeFinish:e.hideAddPanel}}):e._e(),a("el-drawer",{attrs:{title:"设置节点属性",visible:e.dialogVisible,direction:"rtl",size:"500px","before-close":e.closeDialog},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.dialogVisible?a("PropertyDialog",{attrs:{nodeData:e.clickNode,lf:e.lf},on:{setPropertiesFinish:e.closeDialog}}):e._e()],1),a("el-dialog",{attrs:{title:"数据",visible:e.dataVisible,width:"50%"},on:{"update:visible":function(t){e.dataVisible=t}}},[a("DataDialog",{attrs:{graphData:e.graphData}})],1)],1)}),u=[],p=(a("a6d8"),a("95c7")),f=a.n(p),b=a("3523"),h=(a("1d88"),a("7e44"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-collapse",{staticClass:"node-panel",on:{change:e.handleChange},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[e.nodeList.service.list.length>0?a("el-collapse-item",{staticClass:"node-item",attrs:{title:e.nodeList.service.title,name:"1"}},e._l(e.nodeList.service.list,(function(t){return a("div",{key:t.flowProperties.text,on:{mousedown:function(a){return e.$_dragNode(t)}}},[a("div",{staticClass:"node-item-icon",class:t.flowProperties.class}),a("span",{staticClass:"node-label"},[e._v(e._s(t.flowProperties.text))])])})),0):e._e(),e.nodeList.device.list.length>0?a("el-collapse-item",{staticClass:"node-item",attrs:{title:e.nodeList.device.title,name:"2"}},e._l(e.nodeList.device.list,(function(t){return a("div",{key:t.flowProperties.text,on:{mousedown:function(a){return e.$_dragNode(t)}}},[a("div",{staticClass:"node-item-icon",class:t.flowProperties.class}),a("span",{staticClass:"node-label"},[e._v(e._s(t.flowProperties.text))])])})),0):e._e(),e.nodeList.algorithm.list.length>0?a("el-collapse-item",{staticClass:"node-item",attrs:{title:e.nodeList.algorithm.title,name:"3"}},e._l(e.nodeList.algorithm.list,(function(t){return a("div",{key:t.flowProperties.text,on:{mousedown:function(a){return e.$_dragNode(t)}}},[a("div",{staticClass:"node-item-icon",class:t.flowProperties.class}),a("span",{staticClass:"node-label"},[e._v(e._s(t.flowProperties.text))])])})),0):e._e(),e.nodeList.scene.list.length>0?a("el-collapse-item",{staticClass:"node-item",attrs:{title:e.nodeList.scene.title,name:"4"}},e._l(e.nodeList.scene.list,(function(t){return a("div",{key:t.flowProperties.text,on:{mousedown:function(a){return e.$_dragNode(t)}}},[a("div",{staticClass:"node-item-icon",class:t.flowProperties.class}),a("span",{staticClass:"node-label"},[e._v(e._s(t.flowProperties.text))])])})),0):e._e()],1)}),y=[],v=(a("d6a2"),a("c1ec"),a("ed58"),a("26bc"),a("104f"),a("0b33"),a("89a6"),a("45eb")),m=a("7e84"),g=a("d4ec"),x=a("bee2"),O=a("262e"),j=a("2caf");a("3456");function k(e){e.register("start",(function(e){var t=e.CircleNode,a=e.CircleNodeModel,o=e.h,n=function(e){Object(O["a"])(a,e);var t=Object(j["a"])(a);function a(){return Object(g["a"])(this,a),t.apply(this,arguments)}return Object(x["a"])(a,[{key:"getLabelShape",value:function(){var e=this.props.model,t=e.x,a=e.y;return o("text",{fill:"#000000",fontSize:12,x:t-12,y:a+4,width:50,height:25},"Start")}},{key:"getShape",value:function(){var e=this.props.model,t=e.x,a=e.y,n=e.r,i=e.getNodeStyle(),r=i.fill,s=i.stroke;i.strokeWidth;return o("g",{},[o("circle",{cx:t,cy:a,r:n,fill:r,stroke:s,strokeWidth:2}),this.getLabelShape()])}}]),a}(t),i=function(e){Object(O["a"])(a,e);var t=Object(j["a"])(a);function a(){return Object(g["a"])(this,a),t.apply(this,arguments)}return Object(x["a"])(a,[{key:"initNodeData",value:function(e){e.text={value:e.text&&e.text.value||"",x:e.x,y:e.y+35,dragable:!1,editable:!0},Object(v["a"])(Object(m["a"])(a.prototype),"initNodeData",this).call(this,e),this.r=20}},{key:"getNodeStyle",value:function(){var e=Object(v["a"])(Object(m["a"])(a.prototype),"getNodeStyle",this).call(this);return e}},{key:"getAnchorStyle",value:function(){var e=Object(v["a"])(Object(m["a"])(a.prototype),"getAnchorStyle",this).call(this);return e.hover.r=8,e.hover.fill="rgb(24, 125, 255)",e.hover.stroke="rgb(24, 125, 255)",e}},{key:"getOutlineStyle",value:function(){var e=Object(v["a"])(Object(m["a"])(a.prototype),"getOutlineStyle",this).call(this);return e.stroke="#88f",e}},{key:"getConnectedTargetRules",value:function(){var e=Object(v["a"])(Object(m["a"])(a.prototype),"getConnectedTargetRules",this).call(this),t={message:"起始节点不能作为连线的终点",validate:function(){return!1}};return e.push(t),e}}]),a}(a);return{view:n,model:i}}))}a("0579"),a("1940");function N(e){e.register("user",(function(t){var a=t.PolygonNode,o=t.PolygonNodeModel,n=t.h,i=function(e){Object(O["a"])(a,e);var t=Object(j["a"])(a);function a(){return Object(g["a"])(this,a),t.apply(this,arguments)}return Object(x["a"])(a,[{key:"getIconShape",value:function(){var e=this.props.model,t=e.getNodeStyle(),a=t.stroke;return n("svg",{x:20,y:18,width:30,height:30,viewBox:"0 0 1126 1024"},n("path",{fill:a,d:"M792.576 379.392a25.6 25.6 0 0 0 25.2928 25.8048h283.2384A25.6 25.6 0 0 0 1126.4 379.392a25.6 25.6 0 0 0-25.2928-25.8048h-283.2384a25.6 25.6 0 0 0-25.344 25.8048z m303.9232 80.7424H761.856c-16.5376 0-29.9008 11.6224-29.9008 25.7536 0 14.1824 13.312 25.7536 29.9008 25.7536h334.6432c16.4864 0 29.9008-11.5712 29.9008-25.7536 0-14.1312-13.4144-25.7536-29.9008-25.7536z m4.608 106.496h-283.2384a25.6 25.6 0 0 0-25.344 25.7536 25.6 25.6 0 0 0 25.344 25.7536h283.2384A25.6 25.6 0 0 0 1126.4 592.384a25.6 25.6 0 0 0-25.2928-25.8048zM543.0272 1024H341.6576C150.8352 1024 0 1024 0 923.648v-20.1216c0-188.16 153.2928-341.1968 341.7088-341.1968h201.2672c188.416 0 341.76 153.0368 341.76 341.1968v20.0704C884.6848 1024 726.3232 1024 542.976 1024z m-203.1616-405.1456c-158.464 0-287.4368 128.4096-287.4368 286.208v20.48c0 40.9088 166.0928 40.9088 287.4368 40.9088h204.9536c100.4544 0 287.4368 0 287.4368-40.96v-20.3776c0-157.8496-128.9728-286.208-287.4368-286.208H339.8656z m92.416-76.7488a271.4112 271.4112 0 0 1-271.2064-271.0528A271.36 271.36 0 0 1 432.2816 0a271.36 271.36 0 0 1 271.2064 271.0528 271.4624 271.4624 0 0 1-271.2064 271.0528z m-215.3472-271.872c0 118.1696 96.6144 214.3232 215.3472 214.3232 118.784 0 215.3984-96.1536 215.3984-214.3232 0-118.2208-96.6144-214.3232-215.3984-214.3232S216.9344 152.0128 216.9344 270.2336z"}))}},{key:"getShape",value:function(){var e=this.props.model,t=e.width,a=e.height,o=e.x,i=e.y,r=e.points,s=e.getNodeStyle(),c=s.fill,l=s.fillOpacity,d=s.strokeWidth,u=s.stroke,p=s.strokeOpacity,f="matrix(1 0 0 1 ".concat(o-t/2," ").concat(i-a/2,")"),b=r.map((function(e){return e.join(",")})).join(" ");return n("g",{transform:f},[n("polygon",{points:b,fill:c,stroke:u,strokeWidth:d,strokeOpacity:p,fillOpacity:l}),this.getIconShape()])}}]),a}(a),r=function(t){Object(O["a"])(o,t);var a=Object(j["a"])(o);function o(t,n){var i;return Object(g["a"])(this,o),t.text={value:t.text&&t.text.value||"",x:t.x,y:t.y+50},i=a.call(this,t,n),i.menu=[{className:"lf-menu-delete",text:"delete",callback:function(t){e.deleteNode(t.id)}},{text:"edit",className:"lf-menu-item",callback:function(t){e.editText(t.id)}},{text:"copy",className:"lf-menu-item",callback:function(t){e.cloneNode(t.id)}}],i}return Object(x["a"])(o,[{key:"initNodeData",value:function(e){Object(v["a"])(Object(m["a"])(o.prototype),"initNodeData",this).call(this,e);var t=35;this.points=[[t,0],[2*t,t],[t,2*t],[0,t]]}},{key:"getAnchorStyle",value:function(){var e=Object(v["a"])(Object(m["a"])(o.prototype),"getAnchorStyle",this).call(this);return e.hover.r=8,e.hover.fill="rgb(24, 125, 255)",e.hover.stroke="rgb(24, 125, 255)",e}}]),o}(o);return{view:i,model:r}}))}function $(e){e.register("end",(function(e){var t=e.CircleNode,a=e.CircleNodeModel,o=e.h,n=function(e){Object(O["a"])(a,e);var t=Object(j["a"])(a);function a(){return Object(g["a"])(this,a),t.apply(this,arguments)}return Object(x["a"])(a,[{key:"getIconShape",value:function(){var e=this.props.model,t=e.x,a=e.y,n=e.width,i=e.height,r="#404040";return o("svg",{x:t-n/2,y:a-i/2,width:40,height:40,viewBox:"0 0 1024 1024"},o("path",{fill:r,d:"M212.992 526.336 212.992 526.336 212.992 526.336 215.04 526.336 212.992 526.336Z"}),o("path",{fill:r,d:"M724.992 296.96 724.992 296.96 296.96 296.96 296.96 724.992 724.992 724.992 724.992 296.96Z"}))}},{key:"getShape",value:function(){var e=this.props.model,t=e.x,a=e.y,n=e.r,i=e.getNodeStyle(),r=i.fill,s=i.stroke;i.strokeWidth;return o("g",{},[o("circle",{cx:t,cy:a,r:n,fill:r,stroke:s,strokeWidth:2}),this.getIconShape()])}}]),a}(t),i=function(e){Object(O["a"])(a,e);var t=Object(j["a"])(a);function a(){return Object(g["a"])(this,a),t.apply(this,arguments)}return Object(x["a"])(a,[{key:"initNodeData",value:function(e){e.text={value:e.text&&e.text.value||"",x:e.x,y:e.y+35},Object(v["a"])(Object(m["a"])(a.prototype),"initNodeData",this).call(this,e),this.r=20}},{key:"getAnchorStyle",value:function(){var e=Object(v["a"])(Object(m["a"])(a.prototype),"getAnchorStyle",this).call(this);return e.hover.r=8,e.hover.fill="rgb(24, 125, 255)",e.hover.stroke="rgb(24, 125, 255)",e}},{key:"getOutlineStyle",value:function(){var e=Object(v["a"])(Object(m["a"])(a.prototype),"getOutlineStyle",this).call(this);return e.stroke="#88f",e}},{key:"getConnectedSourceRules",value:function(){var e=Object(v["a"])(Object(m["a"])(a.prototype),"getConnectedSourceRules",this).call(this),t={message:"终止节点不能作为连线的起点",validate:function(){return!1}};return e.push(t),e}}]),a}(a);return{view:n,model:i}}))}a("cc25"),a("71c5");function P(e,t,a){e.register("push",(function(o){var n=o.PolygonNode,i=o.PolygonNodeModel,r=o.h,s=function(o){Object(O["a"])(i,o);var n=Object(j["a"])(i);function i(){return Object(g["a"])(this,i),n.apply(this,arguments)}return Object(x["a"])(i,[{key:"getIconShape",value:function(){var e=this.props.model,t=e.getNodeStyle(),a=t.stroke;return r("svg",{x:18,y:18,width:30,height:30,viewBox:"0 0 1024 1024"},r("path",{fill:a,d:"M866.461538 39.384615H393.846154c-43.323077 0-78.769231 35.446154-78.769231 78.769231v1.969231c0 13.784615 7.876923 27.569231 19.692308 35.446154 5.907692 3.938462 80.738462 78.769231 80.738461 78.769231 5.907692 5.907692 15.753846 0 15.753846-7.876924 0-15.753846 13.784615-31.507692 29.538462-31.507692h334.769231c15.753846 0 31.507692 15.753846 31.507692 31.507692v531.692308c0 15.753846-15.753846 27.569231-31.507692 27.569231h-334.769231c-15.753846 0-27.569231-11.815385-27.569231-27.569231v-1.969231c0-7.876923-9.846154-11.815385-15.753846-5.907692 0 0-74.830769 74.830769-82.707692 78.769231-11.815385 7.876923-19.692308 19.692308-19.692308 35.446154v39.384615c0 43.323077 33.476923 78.769231 76.8 78.769231h472.615385c43.323077 0 80.738462-35.446154 80.738461-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231zM630.153846 945.230769c-33.476923 0-59.076923-25.6-59.076923-59.076923s25.6-59.076923 59.076923-59.076923 59.076923 25.6 59.076923 59.076923-25.6 59.076923-59.076923 59.076923z m-86.646154-474.584615L297.353846 224.492308c-11.815385-11.815385-29.538462-11.815385-41.353846 0l-41.353846 41.353846c-11.815385 11.815385-11.815385 29.538462 0 41.353846l90.584615 90.584615c11.815385 11.815385 3.938462 33.476923-13.784615 33.476923H29.538462c-15.753846 1.969231-29.538462 15.753846-29.538462 31.507693v59.076923c0 15.753846 13.784615 29.538462 29.538462 29.538461h259.938461c17.723077 0 25.6 21.661538 13.784615 33.476923l-90.584615 90.584616c-11.815385 11.815385-11.815385 29.538462 0 41.353846l41.353846 41.353846c11.815385 11.815385 29.538462 11.815385 41.353846 0L543.507692 512c9.846154-9.846154 9.846154-29.538462 0-41.353846z"}))}},{key:"getPulsShape",value:function(){var o=this.props.model,n=e.getGraphData(),i=n.edges,s=!1;if(i.some((function(e){if(e.sourceNodeId===o.id)return s=!0,!0})),!s)return r("svg",{x:70,y:20,width:30,height:30,viewBox:"0 0 1024 1024",class:"time-plus",onClick:function(e){return t(e,o)},onMousedown:function(e){return a(e,o)},onMouseUp:function(e){return a(e,o)}},r("path",{fill:"#f17611",d:"M512 512m-448 0a448 448 0 1 0 896 0 448 448 0 1 0-896 0Z"}),r("path",{fill:"#ffffff",d:"M448 298.666667h128v426.666666h-128z"}),r("path",{fill:"#ffffff",d:"M298.666667 448h426.666666v128H298.666667z"}))}},{key:"getShape",value:function(){var e=this.props.model,t=e.width,a=e.height,o=e.x,n=e.y,i=e.points,s=e.getNodeStyle(),c=s.fill,l=s.fillOpacity,d=s.strokeWidth,u=s.stroke,p=s.strokeOpacity,f="matrix(1 0 0 1 ".concat(o-t/2," ").concat(n-a/2,")"),b=i.map((function(e){return e.join(",")})).join(" ");return r("g",{transform:f},[r("polygon",{points:b,fill:c,stroke:u,strokeWidth:d,strokeOpacity:p,fillOpacity:l}),this.getIconShape(),this.getPulsShape()])}}]),i}(n),c=function(e){Object(O["a"])(a,e);var t=Object(j["a"])(a);function a(e,o){var n;Object(g["a"])(this,a),e.text={value:e.text&&e.text.value||"",x:e.x,y:e.y+50},n=t.call(this,e,o);var i=35;return n.points=[[i,0],[2*i,i],[i,2*i],[0,i]],n}return Object(x["a"])(a)}(i);return{view:s,model:c}}))}var _="red";function w(e){e.register("algorithm",(function(e){var t=e.PolygonNode,a=e.PolygonNodeModel,o=e.h,n=function(e){Object(O["a"])(a,e);var t=Object(j["a"])(a);function a(){return Object(g["a"])(this,a),t.apply(this,arguments)}return Object(x["a"])(a,[{key:"getIconShape",value:function(){return o("svg",{x:14,y:13,width:23,height:23,viewBox:"0 0 1024 1024"},o("path",{fill:_,d:"M815.1 380.1c-81.4-27.7-189-42.9-302.9-42.9h-7.3c30.1-39 61.1-72.7 91.3-99.2 26.5-23.2 51.4-39.7 72-47.7 14.4-5.6 26.2-6.7 32.4-3.2 6.7 3.9 11.8 16 13.9 33.3 3 24.4 0 57.5-8.7 95.7L776 332c10.6-46.9 14-87.4 9.9-120.4-3.5-28.7-14.9-67-49.4-86.9-33.1-19.1-92.5-24.4-187.8 59.1-45.6 39.9-92.3 94.2-135.8 157.3-29.3 2.4-57.6 5.8-84.7 10.2-4.9-16.7-8.9-32.9-12-48.4-6.9-34.6-8.7-64.4-5.3-86.2 2.4-15.2 7.2-26 13.4-29.6 10.2-5.9 46.5-1.7 110.5 56.4l48.4-53.3c-34.5-31.3-67.1-53.4-97-65.7-26-10.7-64.1-19.3-97.9 0.2-33.1 19.1-67.4 68-42.7 192.2 3.1 15.8 7.1 32.1 11.9 49-16.9 4.3-33 9-48.2 14.2C89.4 420.9 64.2 475 64.2 513.2c0 39.3 26.8 68.1 49.4 85.3 25.9 19.8 61.8 37.1 106.7 51.3l21.8-68.6c-83.7-26.5-105.8-56.1-105.8-68 0-7.1 6.9-16.8 18.9-26.4 17.2-13.8 44-27.1 77.3-38.5 15-5.1 31-9.7 47.8-13.8 9.7 25.7 21 52 33.6 78.6-17.6 37.2-32.6 74.1-44.6 109.4-21 62.2-32 118.9-31.8 163.8 0.2 38.9 9.2 90.3 51.1 114.5 14.7 8.5 30.1 11.6 45.1 11.6 19.7 0 38.4-5.5 53.3-11.6 30.1-12.4 62.9-34.8 97.5-66.4L436 781.2c-64.6 58.9-101.1 63.2-111.4 57.2-7.2-4.2-14.9-20.1-15.1-52.5-0.2-37.1 9.5-85.7 28-140.5 5.6-16.6 11.9-33.5 19-50.7 1.2 2 2.3 4 3.5 6.1 38.1 65.9 81.5 127.3 125.6 177.4 43.4 49.3 87 87.2 126 109.5 22.1 12.7 50.9 24.7 79.8 24.7 15.2 0 30.5-3.3 45-11.7 41.9-24.2 50.9-75.7 51.1-114.6 0.2-44.9-10.8-101.6-31.8-163.9-10.7-31.8-24-65-39.4-98.5L650.8 554c14.4 31.2 26.7 61.9 36.6 91.4 18.5 54.8 28.2 103.4 28 140.6-0.1 32.4-7.9 48.4-15.1 52.5-7.2 4.2-24.9 2.9-53-13.2-32.2-18.4-69.5-51.1-107.7-94.6-41-46.6-81.6-103.9-117.3-165.8-10-17.3-19.4-34.5-28.2-51.8 8.9-17.5 18.4-34.9 28.4-52.2 9.9-17.2 20.1-33.9 30.6-50.1 19.4-1 39.1-1.5 59.1-1.5 106.2 0 205.6 13.9 279.7 39.1 33.4 11.3 60.1 24.6 77.3 38.5 12 9.7 18.9 19.3 18.9 26.4 0 7.7-7.9 18.1-21.7 28.6-19.4 14.7-49.3 28.6-86.4 40.2l21.5 68.7c45.6-14.2 82.1-31.6 108.4-51.5 22.9-17.3 50.2-46.3 50.2-86 0.1-38.3-25.1-92.4-145-133.2z m-455 44.7c-1.3 2.2-2.5 4.4-3.8 6.6-1.5-3.6-2.9-7.2-4.4-10.8 3.8-0.6 7.7-1.1 11.6-1.6-1.1 1.8-2.2 3.8-3.4 5.8z"}),o("path",{fill:_,d:"M538.7 526.3m-90 0a90 90 0 1 0 180 0 90 90 0 1 0-180 0Z"}))}},{key:"getShape",value:function(){var e=this.props.model,t=e.width,a=e.height,n=e.x,i=e.y,r=e.points,s=e.getNodeStyle(),c=s.fill,l=s.fillOpacity,d=s.strokeWidth,u=s.stroke,p=s.strokeOpacity,f="matrix(1 0 0 1 ".concat(n-t/2," ").concat(i-a/2,")"),b=r.map((function(e){return e.join(",")})).join(" ");return o("g",{transform:f},[o("polygon",{points:b,fill:c,stroke:u,strokeWidth:d,strokeOpacity:p,fillOpacity:l}),this.getIconShape()])}}]),a}(t),i=function(e){Object(O["a"])(a,e);var t=Object(j["a"])(a);function a(e,o){var n;Object(g["a"])(this,a),e.text={value:e.text&&e.text.value||"",x:e.x,y:e.y+50},n=t.call(this,e,o);var i=25;return n.points=[[i,0],[2*i,i],[i,2*i],[0,i]],n}return Object(x["a"])(a,[{key:"getNodeStyle",value:function(){var e=Object(v["a"])(Object(m["a"])(a.prototype),"getNodeStyle",this).call(this);return e.stroke=_,e}}]),a}(a);return{view:n,model:i}}))}var S="#ffcf0a";function D(e){e.register("scene",(function(e){var t=e.PolygonNode,a=e.PolygonNodeModel,o=e.h,n=function(e){Object(O["a"])(a,e);var t=Object(j["a"])(a);function a(){return Object(g["a"])(this,a),t.apply(this,arguments)}return Object(x["a"])(a,[{key:"getIconShape",value:function(){return o("svg",{x:14,y:13,width:23,height:23,viewBox:"0 0 1024 1024"},o("path",{fill:S,d:"M704 640c-6.4 0-12.8 0-19.2 0l-96 166.4c12.8 19.2 19.2 38.4 19.2 57.6C608 915.2 563.2 960 512 960s-96-44.8-96-96S460.8 768 512 768c6.4 0 12.8 0 19.2 0l96-166.4C620.8 595.2 614.4 582.4 614.4 569.6L409.6 518.4C396.8 550.4 358.4 576 320 576 268.8 576 224 531.2 224 480S268.8 384 320 384c6.4 0 12.8 0 19.2 0l96-166.4C422.4 204.8 416 179.2 416 160 416 108.8 460.8 64 512 64s96 44.8 96 96S563.2 256 512 256C505.6 256 499.2 256 492.8 256L396.8 422.4C403.2 428.8 409.6 441.6 409.6 448l204.8 57.6C633.6 473.6 665.6 448 704 448c51.2 0 96 44.8 96 96S755.2 640 704 640zM512 832c-19.2 0-32 12.8-32 32S492.8 896 512 896c19.2 0 32-12.8 32-32S531.2 832 512 832zM512 192c19.2 0 32-12.8 32-32S531.2 128 512 128C492.8 128 480 140.8 480 160S492.8 192 512 192zM320 448C300.8 448 288 460.8 288 480S300.8 512 320 512s32-12.8 32-32S339.2 448 320 448zM704 512c-12.8 0-25.6 12.8-32 25.6 0 0 0 0 0 0l0 6.4c0 0 0 0 0 0C672 563.2 684.8 576 704 576s32-12.8 32-32S723.2 512 704 512z"}))}},{key:"getShape",value:function(){var e=this.props.model,t=e.width,a=e.height,n=e.x,i=e.y,r=e.points,s=e.getNodeStyle(),c=s.fill,l=s.fillOpacity,d=s.strokeWidth,u=s.stroke,p=s.strokeOpacity,f="matrix(1 0 0 1 ".concat(n-t/2," ").concat(i-a/2,")"),b=r.map((function(e){return e.join(",")})).join(" ");return o("g",{transform:f},[o("polygon",{points:b,fill:c,stroke:u,strokeWidth:d,strokeOpacity:p,fillOpacity:l}),this.getIconShape()])}}]),a}(t),i=function(e){Object(O["a"])(a,e);var t=Object(j["a"])(a);function a(e,o){var n;Object(g["a"])(this,a),e.text={value:e.text&&e.text.value||"",x:e.x,y:e.y+50},n=t.call(this,e,o);var i=25;return n.points=[[i,0],[2*i,i],[i,2*i],[0,i]],n}return Object(x["a"])(a,[{key:"getNodeStyle",value:function(){var e=Object(v["a"])(Object(m["a"])(a.prototype),"getNodeStyle",this).call(this);return e.stroke=S,e}}]),a}(a);return{view:n,model:i}}))}var C="#1890ff";function I(e){e.register("device",(function(e){var t=e.PolygonNode,a=e.PolygonNodeModel,o=e.h,n=function(e){Object(O["a"])(a,e);var t=Object(j["a"])(a);function a(){return Object(g["a"])(this,a),t.apply(this,arguments)}return Object(x["a"])(a,[{key:"getIconShape",value:function(){return o("svg",{x:14,y:13,width:23,height:23,viewBox:"0 0 1024 1024"},o("path",{fill:C,d:"M185.6 723.2v89.6h652.8v-89.6H185.6z m-6.4-64h665.6c31.7952 0 57.6 25.8048 57.6 57.6v102.4c0 31.7952-25.8048 57.6-57.6 57.6h-665.6A57.6 57.6 0 0 1 121.6 819.2v-102.4c0-31.7952 25.8048-57.6 57.6-57.6zM185.6 211.2v294.4h448v-294.4h-448zM179.2 147.2h460.8c31.7952 0 57.6 25.8048 57.6 57.6v307.2c0 31.7952-25.8048 57.6-57.6 57.6h-460.8A57.6 57.6 0 0 1 121.6 512V204.8c0-31.7952 25.8048-57.6 57.6-57.6z"}),o("path",{fill:C,d:"M697.6 415.4368l140.8 70.4V230.912l-140.8 70.4v114.0736z m121.4464-246.3232a57.6 57.6 0 0 1 83.3536 51.5072v275.5584a57.6 57.6 0 0 1-83.3536 51.5072l-185.4464-92.672V261.7856l185.4464-92.7232z"}))}},{key:"getShape",value:function(){var e=this.props.model,t=e.width,a=e.height,n=e.x,i=e.y,r=e.points,s=e.getNodeStyle(),c=s.fill,l=s.fillOpacity,d=s.strokeWidth,u=s.stroke,p=s.strokeOpacity,f="matrix(1 0 0 1 ".concat(n-t/2," ").concat(i-a/2,")"),b=r.map((function(e){return e.join(",")})).join(" ");return o("g",{transform:f},[o("polygon",{points:b,fill:c,stroke:u,strokeWidth:d,strokeOpacity:p,fillOpacity:l}),this.getIconShape()])}}]),a}(t),i=function(e){Object(O["a"])(a,e);var t=Object(j["a"])(a);function a(e,o){var n;Object(g["a"])(this,a),e.text={value:e.text&&e.text.value||"",x:e.x,y:e.y+50},n=t.call(this,e,o);var i=25;return n.points=[[i,0],[2*i,i],[i,2*i],[0,i]],n}return Object(x["a"])(a,[{key:"getNodeStyle",value:function(){var e=Object(v["a"])(Object(m["a"])(a.prototype),"getNodeStyle",this).call(this);return e.stroke=C,e}}]),a}(a);return{view:n,model:i}}))}function T(e){e.register("polyline",(function(e){var t=e.PolylineEdge,a=e.PolylineEdgeModel,o=function(e){Object(O["a"])(a,e);var t=Object(j["a"])(a);function a(e,o){return Object(g["a"])(this,a),t.call(this,e,o)}return Object(x["a"])(a)}(a);return{view:t,model:o}}))}function E(e){e.register("task",(function(e){var t=e.RectNode,a=e.RectNodeModel,o=e.h,n=function(e){Object(O["a"])(a,e);var t=Object(j["a"])(a);function a(){return Object(g["a"])(this,a),t.apply(this,arguments)}return Object(x["a"])(a,[{key:"getShape",value:function(){var e=this.props.model,t=e.width,a=e.height,n=e.x,i=e.y,r={x:n-t/2,y:i-a/2},s=e.getNodeStyle();return o("rect",Object(l["a"])(Object(l["a"])({},s),r))}}]),a}(t),i=function(e){Object(O["a"])(a,e);var t=Object(j["a"])(a);function a(e,o){var n;return Object(g["a"])(this,a),n=t.call(this,e,o),n.radius=20,n}return Object(x["a"])(a)}(a);return{view:n,model:i}}))}var L=a("ea39"),z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"connect"},[a("p",[e._v(e._s(e.name))]),a("p",[e._v("您好，请问需要买保险吗？")]),a("div",{staticClass:"button-list"},[a("button",{on:{mousedown:function(t){return t.stopPropagation(),e.done(1)}}},[e._v("有保险了")]),a("button",{on:{mousedown:function(t){return t.stopPropagation(),e.done(2)}}},[e._v("不需要")]),a("button",{on:{mousedown:function(t){return t.stopPropagation(),e.done(3)}}},[e._v("需要")]),a("button",{on:{mousedown:function(t){return t.stopPropagation(),e.done(4)}}},[e._v("特殊")])])])},A=[],M={props:{name:String},methods:{done:function(e){this.$emit("select-button",e)}}},V=M,F=(a("c7e4"),a("2877")),R=Object(F["a"])(V,z,A,!1,null,"a4442fe4",null),W=R.exports;function B(e){e.register("connect",(function(e){var t=e.HtmlNode,a=e.HtmlNodeModel,o=function(e){Object(O["a"])(a,e);var t=Object(j["a"])(a);function a(){return Object(g["a"])(this,a),t.apply(this,arguments)}return Object(x["a"])(a,[{key:"setHtml",value:function(e){var t=this.props.model.properties,a=document.createElement("div");e.innerHTML="",e.appendChild(a);var o=L["a"].extend({render:function(e){return e(W,{props:{name:t.name},on:{"select-button":function(e){console.log("select-button",e)}}})}});(new o).$mount(a)}}]),a}(t),n=function(e){Object(O["a"])(a,e);var t=Object(j["a"])(a);function a(){return Object(g["a"])(this,a),t.apply(this,arguments)}return Object(x["a"])(a,[{key:"initNodeData",value:function(e){e.text&&(e.text.editable=!1),Object(v["a"])(Object(m["a"])(a.prototype),"initNodeData",this).call(this,e);var t=300,o=150;this.width=t,this.height=o,this.anchorsOffset=[[t/2,0],[0,o/2],[-t/2,0],[0,-o/2]]}}]),a}(a);return{view:o,model:n}}))}var J=["flowProperties"],H=Object.values(o).map((function(e){return e.name.replace("register","")})),U={data:function(){return{activeNames:["1","2"]}},name:"NodePanel",props:{lf:Object,nodeList:Object},watch:{nodeList:function(e){console.log(e,"-----value")}},methods:{handleChange:function(){},$_dragNode:function(e){var t=e.flowProperties,a=Object(c["a"])(e,J);this.$props.lf.dnd.startDrag({type:e.flowProperties.type,text:H.includes(e.flowProperties.type)?{value:e.flowProperties.text}:e.flowProperties.text,properties:Object(l["a"])(Object(l["a"])({},a),{},{flowProperties:t})})}}},q=U,Q=(a("f0ff"),Object(F["a"])(q,h,y,!1,null,null,null)),G=Q.exports,K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{attrs:{"tab-position":"left"}},[a("el-tab-pane",{attrs:{label:"添加动作"}},e._l(e.nodeList,(function(t){return a("div",{key:t.type},[a("el-button",{staticClass:"add-node-btn",attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.$_addNode(t)}}},[e._v(e._s(t.label))])],1)})),0),a("el-tab-pane",{attrs:{label:"添加组"}},[a("el-button",{staticClass:"add-node-btn",attrs:{type:"primary",size:"mini"},on:{click:e.$_addTempalte}},[e._v("模板")])],1)],1)},Z=[],Y={name:"AddPanel",props:{nodeData:Object,lf:Object||String},data:function(){return{nodeList:[{type:"user",label:"用户"},{type:"push",label:"推送"}]}},methods:{$_addNode:function(e){var t=this.$props,a=t.lf,o=t.nodeData,n=o.id,i=o.x,r=o.y,s=a.addNode({type:e.type,x:i+150,y:r+150}),c=s.id;a.addEdge({sourceNodeId:n,targetNodeId:c}),this.$emit("addNodeFinish")},$_addTempalte:function(){var e=this.$props,t=e.lf,a=e.nodeData,o=a.id,n=a.x,i=a.y,r=t.addNode({type:"device",x:n,y:i+150}),s=t.addNode({type:"user",x:n+150,y:i+150}),c=t.addNode({type:"push",x:n+150,y:i+300,properties:{}}),l=t.addNode({type:"end",x:n+300,y:i+150}),d=t.addNode({type:"end",x:n+300,y:i+300});t.addEdge({sourceNodeId:o,targetNodeId:r.id}),t.addEdge({sourceNodeId:r.id,targetNodeId:s.id}),t.addEdge({sourceNodeId:s.id,targetNodeId:l.id,endPoint:{x:n+280,y:i+150},text:{value:"Y",x:n+230,y:i+140}}),t.addEdge({sourceNodeId:s.id,targetNodeId:c.id,text:{value:"N",x:n+160,y:i+230}}),t.addEdge({sourceNodeId:c.id,targetNodeId:d.id,endPoint:{x:n+280,y:i+300}}),this.$emit("addNodeFinish")}}},X=Y,ee=(a("6a36"),Object(F["a"])(X,K,Z,!1,null,"66c937e2",null)),te=ee.exports,ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button-group",[a("el-button",{attrs:{type:"plain",size:"small",disabled:e.undoDisable},on:{click:e.$_undo}},[e._v("上一步(ctrl+z)")]),a("el-button",{attrs:{type:"plain",size:"small",disabled:e.redoDisable},on:{click:e.$_redo}},[e._v("下一步(ctrl+y)")]),a("el-button",{attrs:{type:"plain",size:"small"},on:{click:e.$_device}},[e._v("下载图片")]),a("el-button",{attrs:{type:"plain",size:"small"},on:{click:function(t){return e.$refs.refFile.click()}}},[e._v("打开文件")]),a("el-button",{attrs:{type:"plain",size:"small"},on:{click:e.$_export}},[e._v("下载文件")]),a("el-button",{attrs:{type:"plain",size:"small"},on:{click:e.$_catData}},[e._v("查看数据")]),e.catTurboData?a("el-button",{attrs:{type:"plain",size:"small"},on:{click:e.$_catTurboData}},[e._v("查看turbo数据")]):e._e(),e.catTurboData?a("el-button",{attrs:{type:"plain",size:"small"},on:{click:e.$_save}},[e._v("保存")]):e._e(),a("el-button",{attrs:{type:"plain",size:"small"},on:{click:e.$_showMiniMap}},[e._v("查看缩略图")])],1),a("input",{ref:"refFile",staticStyle:{display:"none"},attrs:{type:"file",id:"files",accept:".xml, .json"},on:{change:e.importLocalFile}})],1)},oe=[];function ne(e,t){var a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}var ie={name:"Control",props:{lf:Object||String,catTurboData:Boolean},data:function(){return{undoDisable:!0,redoDisable:!0,graphData:null,dataVisible:!1}},mounted:function(){var e=this;this.$props.lf.on("history:change",(function(t){var a=t.data,o=a.undoAble,n=a.redoAble;e.$data.undoDisable=!o,e.$data.redoDisable=!n}))},methods:{$_zoomIn:function(){this.$props.lf.zoom(!0)},$_zoomOut:function(){this.$props.lf.zoom(!1)},$_zoomReset:function(){this.$props.lf.resetZoom()},$_translateRest:function(){this.$props.lf.resetTranslate()},$_reset:function(){this.$props.lf.resetZoom(),this.$props.lf.resetTranslate()},$_undo:function(){this.$props.lf.undo()},$_redo:function(){this.$props.lf.redo()},$_device:function(){this.$props.lf.getSnapshot()},importLocalFile:function(){var e=this,t=this.$refs.refFile.files[0],a=new FileReader;a.readAsText(t),a.onload=function(t){console.log(t.target.result),e.$emit("renderImportView",JSON.parse(t.target.result))}},$_export:function(){var e=this.$props.lf.getGraphData();ne("logicflow.json",JSON.stringify(e))},$_catData:function(){this.$emit("catData")},$_catTurboData:function(){this.$emit("catTurboData")},$_save:function(){this.$emit("catSaveData")},$_showMiniMap:function(){var e=this.$props.lf;e.extension.miniMap.show(e.graphModel.width-150,40)}}},re=ie,se=Object(F["a"])(re,ae,oe,!1,null,"bf4b5214",null),ce=se.exports,le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"property-dialog"},["device"===e.nodeData.type?a("device",{attrs:{nodeData:e.nodeData,lf:e.lf},on:{onClose:e.handleClose}}):e._e(),"algorithm"===e.nodeData.type?a("algorithm",{attrs:{nodeData:e.nodeData,lf:e.lf},on:{onClose:e.handleClose}}):e._e()],1)},de=[],ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{"label-width":"80px",model:e.formData}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formData.text,callback:function(t){e.$set(e.formData,"text",t)},expression:"formData.text"}})],1),a("el-form-item",{attrs:{label:"ip"}},[a("el-input",{model:{value:e.formData.ip,callback:function(t){e.$set(e.formData,"ip",t)},expression:"formData.ip"}})],1),a("el-form-item",{attrs:{label:"端口"}},[a("el-input",{model:{value:e.formData.port,callback:function(t){e.$set(e.formData,"port",t)},expression:"formData.port"}})],1),a("el-form-item",{attrs:{label:"协议"}},[a("el-input",{model:{value:e.formData.protocol,callback:function(t){e.$set(e.formData,"protocol",t)},expression:"formData.protocol"}})],1),a("el-form-item",{attrs:{label:"命令"}},[a("el-input",{model:{value:e.formData.command,callback:function(t){e.$set(e.formData,"command",t)},expression:"formData.command"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")])],1)],1)],1)},pe=[],fe={name:"",props:{nodeData:Object,lf:Object||String},mounted:function(){var e=this.$props.nodeData,t=e.properties,a=e.text;console.log(t,"properties"),t&&(this.$data.formData=Object.assign({},this.$data.formData,t)),a&&a.value&&(this.$data.formData.text=a.value),a&&a.value&&(this.$data.text=a.value)},data:function(){return{text:"",formData:{text:"",name:"",region:"",type:""}}},methods:{onSubmit:function(){var e=this.$props.nodeData.id;this.$props.lf.setProperties(e,Object(l["a"])({},this.$data.formData)),this.$emit("onClose")}}},be=fe,he=Object(F["a"])(be,ue,pe,!1,null,"16ee0c76",null),ye=he.exports,ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.formData}},[a("el-table-column",{attrs:{prop:"brief",label:"属性",width:"130"}}),a("el-table-column",{attrs:{prop:"type",label:"类型",width:"60"}}),a("el-table-column",{attrs:{prop:"value",width:"180",label:"默认值"}}),a("el-table-column",{attrs:{prop:"io",width:"100",label:"输入/输出"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e._f("filterIO")(t.row.io)))])]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleRowClick(t.row)}}},[e._v("编辑")])]}}])})],1),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit()}}},[e._v("保存")])],1),a("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"30%","append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.form,"status-icon":"",rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"默认值",prop:"value"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.value,callback:function(t){e.$set(e.form,"value",t)},expression:"form.value"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleOK}},[e._v("确 定")])],1)],1)],1)},me=[],ge=a("53ca"),xe={name:"",props:{nodeData:Object,lf:Object||String},mounted:function(){var e=this.$props.nodeData.properties;if(this.parsedAlgParam=JSON.parse(e.algParam),this.parsedAlgParam)for(var t in this.parsedAlgParam)"object"===Object(ge["a"])(this.parsedAlgParam[t])&&this.$data.formData.push(this.parsedAlgParam[t])},filters:{filterIO:function(e){return"in"===e?"输入":"输出"}},data:function(){return{parsedAlgParam:{},form:[],rowRecord:{},formData:[],dialogVisible:!1,rules:{pass:[{required:!0,trigger:"blur"}]}}},methods:{handleRowClick:function(e){this.form=e,this.dialogVisible=!0},handleOK:function(){this.dialogVisible=!1},onSubmit:function(){var e=this.$props.nodeData.id;this.$props.nodeData.properties.algParam=JSON.stringify(this.parsedAlgParam),this.$props.lf.setProperties(e,Object(l["a"])({},this.$props.nodeData.properties)),this.$emit("onClose")}}},Oe=xe,je=Object(F["a"])(Oe,ve,me,!1,null,"3d8fd256",null),ke=je.exports,Ne={name:"PropertyDialog",components:{device:ye,algorithm:ke},props:{nodeData:Object,lf:Object},data:function(){return{}},methods:{handleClose:function(){this.$emit("setPropertiesFinish")}}},$e=Ne,Pe=(a("4f66"),Object(F["a"])($e,le,de,!1,null,null,null)),_e=Pe.exports,we=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("vue-json-pretty",{attrs:{path:"res",data:e.graphData}})],1)},Se=[],De=a("6771"),Ce=a.n(De),Ie=(a("3e0c"),{props:{graphData:Object},components:{VueJsonPretty:Ce.a}}),Te=Ie,Ee=Object(F["a"])(Te,we,Se,!1,null,"f404e798",null),Le=Ee.exports,ze=[{type:"start",class:"node-start",text:"开始节点",label:"开始"},{text:"矩形节点",type:"rect",class:"node-rect",label:"矩形"},{text:"圆形节点",type:"circle",class:"node-circle",label:"圆形"},{type:"user",text:"用户节点",class:"node-user",label:"用户"},{type:"device",text:"位置节点",class:"node-device",label:"位置"},{type:"end",text:"结束节点",class:"node-end",label:"结束"}],Ae=(a("7906"),a("0121"),a("3094"),a("1203"),a("6fe8"),a("908d"),a("470a"),["flowProperties"]),Me=["text","label","type"],Ve=["properties","current"],Fe=Object.values(o).map((function(e){return e.name.replace("register","")})),Re={SEQUENCE_FLOW:1,START_EVENT:2,END_EVENT:3,USER_TASK:4,SERVICE_TASK:5,EXCLUSIVE_GATEWAY:6};function We(e){switch(e){case"start":return Re.START_EVENT;case"end":return Re.START_EVENT;case"device":return Re.USER_TASK;case"scene":return Re.SEQUENCE_FLOW;case"algorithm":return Re.END_EVENT;case"polyline":return Re.SERVICE_TASK;default:return e}}var Be=function(e,t){if(We(e)===Re.END_EVENT)return{params:t.params}};function Je(e){var t=new Map,a={proc:[]};return e.nodes.forEach((function(e){var o=He(e);a.proc.push(o),t.set(e.id,o)})),e.edges.forEach((function(e){var o=Ue(e),n=t.get(e.sourceNodeId);n.next=o.current;var i=t.get(e.targetNodeId);i.prev=o.current,a.proc.push(o)})),a}function He(e){var t=e.x,a=e.y,o=e.properties,n=o.flowProperties,i=Object(c["a"])(o,Ae),r=(i.text,i.label,i.type,Object(c["a"])(i,Me));Be(e.type,o);return Object(l["a"])(Object(l["a"])({prev:[],next:[],procType:We(e.type)},r),{},{properties:Object(l["a"])(Object(l["a"])({},n),{},{text:n.text,x:t,y:a}),current:e.id})}function Ue(e){var t=e.id,a=e.type,o=e.sourceNodeId,n=e.targetNodeId,i=e.startPoint,r=e.endPoint,s=e.pointsList,c=e.text,d=void 0===c?"":c,u=e.properties;return{prev:[o],next:[n],procType:We(a),properties:Object(l["a"])(Object(l["a"])({},u),{},{name:d&&d.value||"",text:d,startPoint:i,endPoint:r,pointsList:s,type:a}),current:t}}function qe(e){var t={nodes:[],edges:[]};if(!e.procDetailList)return{};var a=e.procDetailList;return a&&a.length>0&&a.forEach((function(e){if(e.procType===Re.SERVICE_TASK){var a=Qe(e);t.edges.push(a)}else{var o=Ge(e);t.nodes.push(o)}})),t}function Qe(e){e.properties=JSON.parse(e.properties);var t=e.prev,a=e.next,o=e.properties,n=e.current,i=o.text,r=o.startPoint,s=o.endPoint,c=o.pointsList,l=o.type,d={id:n,type:l,sourceNodeId:t,targetNodeId:a,text:i,startPoint:r,endPoint:s,pointsList:c,properties:{}},u=["startPoint","endPoint","pointsList","text","type"];return Object.keys(e.properties).forEach((function(t){-1===u.indexOf(t)&&(d.properties[t]=e.properties[t])})),d}function Ge(e){e.properties=JSON.parse(e.properties);var t=e.properties,a=e.current,o=Object(c["a"])(e,Ve),n=t.text,i=t.type,r=t.x,s=t.y,d=Be(i,t),u={id:a,type:i,text:Fe.includes(i)?{value:n}:n,x:r,y:s,properties:Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])({},t),o),d),{},{flowProperties:{x:r,y:s,type:i,text:n}})};return u}a("e374"),a("e197");var Ke={name:"LF",components:{NodePanel:G,AddPanel:te,Control:ce,PropertyDialog:_e,DataDialog:Le},data:function(){return{reviewRecord:{},lf:null,showAddPanel:!1,addPanelStyle:{top:0,left:0},nodeData:null,addClickNode:null,clickNode:null,dialogVisible:!1,graphData:null,dataVisible:!1,config:{background:{backgroundColor:"#f7f9ff"},grid:{size:20,visible:!0,type:"mesh",config:{color:"#ababab",thickness:1}},keyboard:{enabled:!0},edgeTextDraggable:!0,hoverOutline:!1},moveData:{},nodeList:ze}},props:{panelConfig:Object,record:Object},watch:{record:function(e){this.reviewRecord=e,this.$_render()}},mounted:function(){this.$_initLf()},methods:{$_catTurboData:function(){var e=this.$data.lf.getGraphData();this.$data.graphData=Je(e),this.$data.dataVisible=!0},$_catSaveData:function(){var e=this.$data.lf.getGraphData();this.$data.graphData=Je(e),this.$emit("emitTransfromRecord",this.$data.graphData)},$_initLf:function(){var e=new f.a(Object(l["a"])(Object(l["a"])({},this.config),{},{plugins:[b["a"],b["b"],b["c"]],container:this.$refs.container}));this.lf=e,e.setTheme({circle:{stroke:"#000000",strokeWidth:1,outlineColor:"#88f"},rect:{outlineColor:"#88f",strokeWidth:1},polygon:{strokeWidth:1},polyline:{stroke:"#000000",hoverStroke:"#000000",selectedStroke:"#000000",outlineColor:"#88f",strokeWidth:1},nodeText:{color:"#000000"},edgeText:{color:"#000000",background:{fill:"#f7f9ff"}}}),this.$_registerNode()},$_registerNode:function(){k(this.lf),N(this.lf),$(this.lf),P(this.lf,this.clickPlus,this.mouseDownPlus),I(this.lf),w(this.lf),D(this.lf),T(this.lf),E(this.lf),B(this.lf),this.$_render()},$_render:function(){var e=qe(JSON.parse(JSON.stringify(this.reviewRecord)));console.log(e,"lFData"),this.lf.render(e),this.$_LfEvent()},$_renderImportView:function(e){this.lf.render(e),this.$_LfEvent()},$_getData:function(){var e=this.lf.getGraphData();console.log(JSON.stringify(e))},$_LfEvent:function(){var e=this;this.lf.on("node:click",(function(t){var a=t.data;console.log("node:click",a),e.$data.clickNode=a,e.$data.dialogVisible=!0})),this.lf.on("edge:click",(function(t){var a=t.data;console.log("edge:click",a),e.$data.clickNode=a,e.$data.dialogVisible=!0})),this.lf.on("element:click",(function(){e.hideAddPanel()})),this.lf.on("edge:add",(function(e){var t=e.data;console.log("edge:add",t)})),this.lf.on("node:mousemove",(function(t){var a=t.data;console.log("node:mousemove"),e.moveData=a})),this.lf.on("blank:click",(function(){e.hideAddPanel()})),this.lf.on("connection:not-allowed",(function(t){e.$message({type:"error",message:t.msg})})),this.lf.on("node:mousemove",(function(){console.log("on mousemove")}))},clickPlus:function(e,t){e.stopPropagation(),console.log("clickPlus",e,t);var a=e.clientX,o=e.clientY;console.log(a,o),this.$data.addPanelStyle.top=o-40+"px",this.$data.addPanelStyle.left=a+"px",this.$data.showAddPanel=!0,this.$data.addClickNode=t},mouseDownPlus:function(e,t){e.stopPropagation(),console.log("mouseDownPlus",e,t)},hideAddPanel:function(){this.$data.showAddPanel=!1,this.$data.addPanelStyle.top=0,this.$data.addPanelStyle.left=0,this.$data.addClickNode=null},closeDialog:function(){this.$data.dialogVisible=!1},$_catData:function(){this.$data.graphData=this.$data.lf.getGraphData(),this.$data.dataVisible=!0},goto:function(){this.$router.push("/TurboAdpter")}}},Ze=Ke,Ye=(a("c571"),Object(F["a"])(Ze,d,u,!1,null,null,null)),Xe=Ye.exports,et=a("aa98"),tt=a("644f"),at=a("b775");function ot(e){return Object(at["a"])({url:"/algorithm/getMethodInfo ",method:"post",params:e})}var nt={device:{list:"",title:"设备"},service:{list:[{name:"开始",text:"开始节点",class:"node-start",type:"start"},{name:"结束",text:"结束节点",class:"node-end",type:"end"}],title:"服务"},algorithm:{list:[{name:"二维码",id:1},{name:"缝隙",id:2},{name:"划伤划痕",id:3},{name:"模版匹配",id:4},{name:"螺丝检测",id:5}],title:"算子"},scene:{list:"",title:"场景"}},it=nt,rt=["procId"],st=["id"],ct=["name","params"],lt=["id"],dt={data:function(){return{panelConfig:it,initPanConfFlag:!1,record:{}}},components:{LF:Xe},mounted:function(){this.main()},methods:{initEdit:function(){var e=this;this.$route.query.procId&&Object(tt["a"])({procId:this.$route.query.procId}).then((function(t){e.record=t.data}))},emitTransfromRecord:function(e){var t=this,a=Object(l["a"])({type:4,procId:+this.$route.query.procId,sceneInfoId:+this.$route.query.sceneInfoId,descInfo:this.$route.query.descInfo,name:this.$route.query.name},e);this.$route.query.procId?Object(tt["f"])(a).then((function(e){t.$message({type:"success",message:"修改成功!!",center:!0})})):Object(tt["g"])(a).then((function(e){t.$message({type:"success",message:"保存成功!!",center:!0})}))},initPanConf:function(){this.panelConfig.scene.list=this.panelConfig.scene.list.map((function(e){var t=e.procId,a=Object(c["a"])(e,rt);return Object(l["a"])(Object(l["a"])({},a),{},{flowProperties:{class:"node-scene",type:"scene",text:e.name,label:e.name},sceneId:t})})),this.panelConfig.device.list=this.panelConfig.device.list.map((function(e){var t=e.id,a=Object(c["a"])(e,st);return Object(l["a"])(Object(l["a"])({},a),{},{flowProperties:{class:"node-device",type:"device",text:e.name,label:e.name},deviceType:e.type,deviceId:t})})),this.panelConfig.algorithm.list=this.panelConfig.algorithm.list.map((function(e){var t=e.name,a=e.params,o=Object(c["a"])(e,ct);return Object(l["a"])(Object(l["a"])({},o),{},{flowProperties:{class:"node-algorithm",type:"algorithm",text:t,label:t},algParam:a,algName:t,algType:e.algId})})),this.panelConfig.service.list=this.panelConfig.service.list.map((function(e){e.id;var t=Object(c["a"])(e,lt);return Object(l["a"])(Object(l["a"])({},t),{},{flowProperties:{class:e["class"],type:e.type,text:e.name,label:e.name}})})),this.initPanConfFlag=!0},main:function(){var e=this;return Object(s["a"])(Object(r["a"])().mark((function t(){var a,o,n;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(et["b"])();case 2:return a=t.sent,t.next=5,Object(tt["e"])();case 5:return t.sent,t.next=8,Object(tt["c"])();case 8:return o=t.sent,t.next=11,ot();case 11:n=t.sent,e.panelConfig.device.list=a.data,e.panelConfig.scene.list=o.data,e.panelConfig.algorithm.list=Object.values(n.data).filter((function(e){return e})),e.initPanConf(),e.initEdit();case 17:case"end":return t.stop()}}),t)})))()}}},ut=dt,pt=Object(F["a"])(ut,n,i,!1,null,"297ff613",null);t["default"]=pt.exports},"4f66":function(e,t,a){"use strict";a("9cae")},"644f":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"e",(function(){return s})),a.d(t,"g",(function(){return c})),a.d(t,"b",(function(){return l})),a.d(t,"h",(function(){return d})),a.d(t,"d",(function(){return u})),a.d(t,"f",(function(){return p}));var o=a("5530"),n=a("b775");function i(e){return Object(n["a"])({url:"/process/getProcess",method:"get",params:e})}function r(e){return Object(n["a"])({url:"/process/getSceneList",method:"post",params:e})}function s(e){return Object(n["a"])({url:"/process/getServiceList",method:"post",params:e})}function c(e){return Object(n["a"])({url:"/process/saveProcess",method:"post",data:Object(o["a"])({},e)})}function l(e){return Object(n["a"])({url:"/process/getSceneInfoList",method:"get",params:e})}function d(e){return Object(n["a"])({url:"/process/saveSceneInfo",method:"post",data:Object(o["a"])({},e)})}function u(e){return Object(n["a"])({url:"/process/getSceneProcess",method:"get",params:e})}function p(e){return Object(n["a"])({url:"/process/modifyProcess",method:"post",data:Object(o["a"])({},e)})}},"6a36":function(e,t,a){"use strict";a("06c3")},9900:function(e,t,a){},"9cae":function(e,t,a){},aa98:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return i}));var o=a("b775");function n(e){return Object(o["a"])({url:"/screen/getDeviceList",method:"post",params:e})}function i(e){return Object(o["a"])({url:"/screen/addDevice",method:"post",data:e})}},c571:function(e,t,a){"use strict";a("9900")},c7e4:function(e,t,a){"use strict";a("ccb4")},ccb4:function(e,t,a){},e197:function(e){e.exports=JSON.parse('{"proc":[{"prev":[],"next":["f441ec70-3c02-477a-a0a6-0618b658a111"],"procType":2,"name":"开始","text":"开始节点","class":"node-start","type":"start","logicFlowType":"bpmn:startEvent","properties":{"class":"node-start","type":"start","text":"开始","label":"开始","x":220,"y":160,"logicFlowType":"start"},"current":"3a627474-f47c-4ba4-be4d-acb23a021778"},{"prev":["f441ec70-3c02-477a-a0a6-0618b658a111"],"next":["ec52c83d-fa6e-48d3-8b08-db4ab6083673"],"procType":4,"createTime":"2022-07-11 10:00:02","drive":"1","ip":"","name":"相机","port":10,"protocol":"tcp","type":1,"updateTime":null,"deviceType":1,"deviceId":20,"logicFlowType":"bpmn:startEvent","properties":{"class":"node-device","type":"device","text":"相机","label":"相机","x":320,"y":320,"logicFlowType":"device"},"current":"2da9305a-4df2-46b0-b950-9a03fdd147aa"},{"prev":["ec52c83d-fa6e-48d3-8b08-db4ab6083673"],"next":["acb63959-6fdd-45b5-a894-94c6429be83e"],"procType":3,"algId":0,"breif":"QBar brief(&","params":"0,[in][QBar]input path ,char*,C:/Users/tianyunjie/Desktop/ë��/Pictures/1.png;10,[out][QBar]information,char*,;","algName":"QBar","logicFlowType":"bpmn:startEvent","properties":{"class":"node-algorithm","type":"algorithm","text":"QBar","label":"QBar","x":560,"y":280,"logicFlowType":"algorithm"},"current":"ac7150cc-6ae0-4019-abd4-644742e6abff"},{"prev":["acb63959-6fdd-45b5-a894-94c6429be83e"],"next":[],"procType":2,"name":"结束","text":"结束节点","class":"node-end","type":"end","logicFlowType":"bpmn:startEvent","properties":{"class":"node-end","type":"end","text":"结束","label":"结束","x":680,"y":220,"logicFlowType":"end"},"current":"445759ef-5d22-4954-91ae-d1512884a33d"},{"prev":["3a627474-f47c-4ba4-be4d-acb23a021778"],"next":["2da9305a-4df2-46b0-b950-9a03fdd147aa"],"procType":5,"properties":{"name":"","text":"","startPoint":{"x":240,"y":160},"endPoint":{"x":295,"y":320},"pointsList":[{"x":240,"y":160},{"x":265,"y":160},{"x":265,"y":320},{"x":295,"y":320}],"logicFlowType":"polyline"},"current":"f441ec70-3c02-477a-a0a6-0618b658a111"},{"prev":["2da9305a-4df2-46b0-b950-9a03fdd147aa"],"next":["ac7150cc-6ae0-4019-abd4-644742e6abff"],"procType":5,"properties":{"name":"","text":"","startPoint":{"x":345,"y":320},"endPoint":{"x":535,"y":280},"pointsList":[{"x":345,"y":320},{"x":440,"y":320},{"x":440,"y":280},{"x":535,"y":280}],"logicFlowType":"polyline"},"current":"ec52c83d-fa6e-48d3-8b08-db4ab6083673"},{"prev":["ac7150cc-6ae0-4019-abd4-644742e6abff"],"next":["445759ef-5d22-4954-91ae-d1512884a33d"],"procType":5,"properties":{"name":"","text":"","startPoint":{"x":585,"y":280},"endPoint":{"x":700,"y":220},"pointsList":[{"x":585,"y":280},{"x":730,"y":280},{"x":730,"y":220},{"x":700,"y":220}],"logicFlowType":"polyline"},"current":"acb63959-6fdd-45b5-a894-94c6429be83e"}]}')},e374:function(e){e.exports=JSON.parse('{"nodes":[{"id":"742356ea-762b-4899-b96a-bd567e3c4361","type":"start","x":220,"y":170,"text":{"x":350,"y":190,"value":"sdfasf"},"properties":{},"baseType":"node"},{"id":"dacda6b6-48d3-4dff-911d-287704eb23d8","type":"rect","x":350,"y":170,"properties":{},"baseType":"node","text":{"x":350,"y":170,"value":"基础节点"}},{"id":"49106603-2b88-4b2c-b1e8-723c1f2210bd","type":"user","x":530,"y":170,"properties":{},"baseType":"node","text":{"x":530,"y":220,"value":"自定义节点"}},{"id":"647fa2bc-98ee-40cf-99c5-4756c0bc130d","type":"push","x":690,"y":170,"properties":{},"baseType":"node","text":{"x":690,"y":220,"value":"自定义节点 可添加下一个节点/节点组"}},{"id":"37e7bac3-8804-4237-abe9-7b6065c207e9","type":"device","x":690,"y":320,"text":{"x":350,"y":190,"value":"sdfasf"},"properties":{},"baseType":"node"},{"id":"6bb4396f-54c9-4b1c-b34c-87ef004f2e29","type":"user","x":840,"y":320,"properties":{},"baseType":"node"},{"id":"abf76937-63b8-493c-a978-a4a58bc4f6b8","type":"push","x":840,"y":470,"properties":{},"baseType":"node"},{"id":"b119f24f-2669-4a90-a837-afd853b2ffcc","type":"end","x":990,"y":320,"properties":{},"baseType":"node"},{"id":"60326ad9-cae2-4a85-ae98-d340fb7bd67f","type":"end","x":990,"y":470,"properties":{},"baseType":"node"},{"id":"414fe028-3609-4450-b0f4-e5aca7705e8c","type":"device","x":860,"y":170,"properties":{},"baseType":"node","text":{"x":860,"y":220,"value":"自定义节点-设置颜色"}}],"edges":[{"id":"00f55245-513e-43a2-9cb0-adb61b01adc8","type":"polyline","sourceNodeId":"742356ea-762b-4899-b96a-bd567e3c4361","targetNodeId":"dacda6b6-48d3-4dff-911d-287704eb23d8","startPoint":{"x":240,"y":170},"endPoint":{"x":300,"y":170},"properties":{},"pointsList":[{"x":240,"y":170},{"x":300,"y":170}]},{"id":"bbf9754f-603e-48e4-85fe-84ed44459a6a","type":"polyline","sourceNodeId":"dacda6b6-48d3-4dff-911d-287704eb23d8","targetNodeId":"49106603-2b88-4b2c-b1e8-723c1f2210bd","startPoint":{"x":400,"y":170},"endPoint":{"x":495,"y":170},"properties":{},"pointsList":[{"x":400,"y":170},{"x":495,"y":170}]},{"id":"12bb443b-4070-4a08-ad4d-2755ee856f0d","type":"polyline","sourceNodeId":"49106603-2b88-4b2c-b1e8-723c1f2210bd","targetNodeId":"647fa2bc-98ee-40cf-99c5-4756c0bc130d","startPoint":{"x":565,"y":170},"endPoint":{"x":655,"y":170},"properties":{},"pointsList":[{"x":565,"y":170},{"x":655,"y":170}]},{"id":"33fa3c09-9c29-4cb7-8373-67d537b8b623","type":"polyline","sourceNodeId":"647fa2bc-98ee-40cf-99c5-4756c0bc130d","targetNodeId":"37e7bac3-8804-4237-abe9-7b6065c207e9","startPoint":{"x":690,"y":205},"endPoint":{"x":690,"y":295},"properties":{},"pointsList":[{"x":690,"y":205},{"x":690,"y":295}]},{"id":"2b5a5e89-005e-4fda-9a44-dc795050534f","type":"polyline","sourceNodeId":"37e7bac3-8804-4237-abe9-7b6065c207e9","targetNodeId":"6bb4396f-54c9-4b1c-b34c-87ef004f2e29","startPoint":{"x":715,"y":320},"endPoint":{"x":805,"y":320},"properties":{},"pointsList":[{"x":715,"y":320},{"x":805,"y":320}]},{"id":"62b54f8a-bcfd-494b-9144-5aeb09ca77a1","type":"polyline","sourceNodeId":"6bb4396f-54c9-4b1c-b34c-87ef004f2e29","targetNodeId":"b119f24f-2669-4a90-a837-afd853b2ffcc","startPoint":{"x":875,"y":320},"endPoint":{"x":970,"y":320},"properties":{},"text":{"x":920,"y":310,"value":"Y"},"pointsList":[{"x":875,"y":320},{"x":970,"y":320}]},{"id":"ba816d4a-5785-4911-9f78-03933f1463a1","type":"polyline","sourceNodeId":"6bb4396f-54c9-4b1c-b34c-87ef004f2e29","targetNodeId":"abf76937-63b8-493c-a978-a4a58bc4f6b8","startPoint":{"x":840,"y":355},"endPoint":{"x":840,"y":435},"properties":{},"text":{"x":850,"y":400,"value":"N"},"pointsList":[{"x":840,"y":355},{"x":840,"y":435}]},{"id":"2b3007ed-7a13-4db7-a1ea-6691d7564c34","type":"polyline","sourceNodeId":"abf76937-63b8-493c-a978-a4a58bc4f6b8","targetNodeId":"60326ad9-cae2-4a85-ae98-d340fb7bd67f","startPoint":{"x":875,"y":470},"endPoint":{"x":970,"y":470},"properties":{},"pointsList":[{"x":875,"y":470},{"x":970,"y":470}]},{"id":"262e2263-6c8c-4a38-b223-97848e9b5767","type":"polyline","sourceNodeId":"647fa2bc-98ee-40cf-99c5-4756c0bc130d","targetNodeId":"414fe028-3609-4450-b0f4-e5aca7705e8c","startPoint":{"x":725,"y":170},"endPoint":{"x":835,"y":170},"properties":{},"pointsList":[{"x":725,"y":170},{"x":835,"y":170}]}]}')},e4d5:function(e,t,a){},f0ff:function(e,t,a){"use strict";a("e4d5")}}]);